---
// src/components/TimelineItem.astro
const { year, title, company, description, images } = Astro.props;

// Logic: Pecah deskripsi jadi poin-poin
const descriptionPoints = description
    ? description.split('. ').filter(text => text.trim().length > 0) 
    : [];
---

<div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 hover:shadow-xl transition-all duration-300 flex flex-col group relative overflow-hidden">
    
    <div class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 rounded-l-2xl"></div>

    <div class="mb-4 pl-2">
        <div class="flex flex-wrap items-center justify-between gap-2 mb-2">
            <span class="inline-block px-3 py-1 text-xs font-extrabold tracking-wider text-white bg-blue-600 rounded-md uppercase shadow-sm shadow-blue-200 dark:shadow-none">
                {year}
            </span>
        </div>
        
        <h3 class="text-xl font-bold text-gray-900 dark:text-white leading-tight mb-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
            {title}
        </h3>
        
        <div class="flex items-center gap-1.5 text-sm font-semibold text-gray-500 dark:text-gray-400">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-blue-500">
              <path fill-rule="evenodd" d="M4 10a6 6 0 1012 0 6 6 0 00-12 0zm8-3a1 1 0 10-2 0 1 1 0 002 0zm-2 4a1 1 0 01-1-1V8a1 1 0 012 0v2.235l1.97 1.971a1 1 0 101.414-1.414l-2.435-2.435A.998.998 0 0110 7V5a1 1 0 012 0 1 1 0 11-2 0v2.126l-1.92 1.92A1 1 0 0110 11z" clip-rule="evenodd" />
            </svg>
            {company}
        </div>
    </div>

    <div class="bg-gray-50 dark:bg-gray-900/50 rounded-xl p-4 border border-gray-100 dark:border-gray-800">
        <ul class="space-y-2">
            {descriptionPoints.map((point) => (
                <li class="flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300 leading-relaxed">
                    <span class="mt-1.5 min-w-[6px] h-[6px] rounded-full bg-blue-400 dark:bg-blue-500 shrink-0"></span>
                    <span>
                        {point}{point.endsWith('.') ? '' : '.'}
                    </span>
                </li>
            ))}
        </ul>
    </div>

    {images && images.length > 0 && (
        <div class="grid grid-cols-2 gap-2 mt-auto pt-4 border-t border-gray-100 dark:border-gray-700">
            {images.map((imgSrc) => (
                <div class="relative group/img overflow-hidden rounded-lg cursor-zoom-in h-24 border border-gray-200 dark:border-gray-700 bg-gray-200 dark:bg-gray-800">
                    <img 
                        src={imgSrc} 
                        alt={title} 
                        class="lightbox-trigger w-full h-full object-cover transition duration-500 group-hover/img:scale-110 opacity-90 group-hover/img:opacity-100"
                        loading="lazy"
                    />
                </div>
            ))}
        </div>
    )}
</div>